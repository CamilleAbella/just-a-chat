<%- include('../partials/header') %>

<nav aria-label="breadcrumb" role="navigation">
    <ol class="breadcrumb">
        <% for(const part of post.path){ %>
            <li class="breadcrumb-item"><a href="/post/<%= part.id %>"><%= part.content.slice(0.20) + "..." %></a></li>
        <% } %>
    </ol>
</nav>

<div class="d-flex">
    <%- include('../partials/post', { user, post, getFullPost, redirect: '/post/' + post.id }) %>
</div>

<hr>

<h2> Reactions </h2>

<form action="/post" method="POST" id="post">
    <input type="hidden" name="redirect" value="/post/<%= post.id %>">
    <input type="hidden" name="author_id" value="<%= user.id %>">
    <input type="hidden" name="parent_id" value="<%= post.id %>">
    <div class="form-group">
        <textarea name="content" class="form-control" form="post"></textarea>
    </div>
    <input type="submit" class="btn btn-primary btn-round">
</form>

<div class="d-flex flex-wrap">
    <% for(const data of post.children) { const child = getFullPost(data); %>
        <%- include('../partials/post', { user, post: child, getFullPost, redirect: '/post/' + post.id }) %>
    <% } %>
</div>

<%- include('../partials/footer') %>